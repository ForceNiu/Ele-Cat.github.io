//TinyBox
TINY={};TINY.box=function(){var j,l,b,i,k,g=0;return{show:function(a){k={opacity:70,close:1,animate:1,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0,openjs:"",farg1:"",farg2:"",html2funct:0,refill:0,fillwithresponse:1,div:0};for(s in a){k[s]=a[s]}if(k.refill){TINY.box.refil();return}if(!g){j=document.createElement("div");j.className="tbox";g=document.createElement("div");g.className="tinner";b=document.createElement("div");b.className="tcontent";l=document.createElement("div");l.className="tmask";i=document.createElement("div");i.className="tclose";i.v=0;document.body.appendChild(l);document.body.appendChild(j);j.appendChild(g);g.appendChild(b);l.onclick=i.onclick=TINY.box.hide;window.onresize=TINY.box.resize}else{j.style.display="none";clearTimeout(g.ah);if(i.v){g.removeChild(i);i.v=0}}g.id=k.boxid;l.id=k.maskid;j.style.position=k.fixed?"fixed":"absolute";if(k.html&&!k.animate){g.style.backgroundImage="none";b.innerHTML=k.html;b.style.display="";g.style.width=k.width?k.width+"px":"auto";g.style.height=k.height?k.height+"px":"auto"}else{b.style.display="none";if(!k.animate&&k.width&&k.height){g.style.width=k.width+"px";g.style.height=k.height+"px"}else{g.style.width=g.style.height="100px"}}if(k.mask){this.mask();this.alpha(l,1,k.opacity)}else{this.alpha(j,1,100)}if(k.autohide){g.ah=setTimeout(TINY.box.hide,1000*k.autohide)}else{document.onkeyup=TINY.box.esc}},fill:function(h,c,d,e,f,q){if(c){if(k.div){newdiv=document.getElementById(k.div);newdiv.style.display="block";this.psh(newdiv,e,f,q)}else{if(k.image){var r=new Image();r.onload=function(){f=f||r.width;q=q||r.height;TINY.box.psh(r,e,f,q)};r.src=k.image}else{if(k.iframe){this.psh('<iframe src="'+k.iframe+'" width="'+k.width+'" frameborder="0" height="'+k.height+'"></iframe>',e,f,q)}else{var a=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){if(a.readyState==4&&a.status==200){g.style.backgroundImage="";TINY.box.psh(a.responseText,e,f,q)}};if(d){alert(d);a.open("POST",h,true);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(d)}else{a.open("GET",h,true);a.send(null)}}}}}else{this.psh(h,e,f,q)}},psh:function(c,f,h,e){if(k.fillwithresponse){if(typeof c=="object"||k.div){b.appendChild(c)}else{b.innerHTML=c}}var a=g.style.width,d=g.style.height;if(!h||!e){g.style.width=h?h+"px":"";g.style.height=e?e+"px":"";b.style.display="";if(!e){e=parseInt(b.offsetHeight)}if(!h){h=parseInt(b.offsetWidth)}b.style.display="none"}g.style.width=a;g.style.height=d;this.size(h,e,f,c)},esc:function(a){a=a||window.event;if(a.keyCode==27){TINY.box.hide()}},hide:function(){TINY.box.alpha(j,-1,0,3);document.onkeypress=null;if(k.closejs){k.closejs()}},resize:function(){TINY.box.pos();TINY.box.mask()},mask:function(){l.style.height=this.total(1)+"px";l.style.width=this.total(0)+"px"},pos:function(){var a;if(typeof k.top!="undefined"){a=k.top}else{a=(this.height()/k.topsplit)-(j.offsetHeight/2);a=a<20?20:a}if(!k.fixed&&!k.top){a+=this.top()}j.style.top=a+"px";j.style.left=typeof k.left!="undefined"?k.left+"px":(this.width()/2)-(j.offsetWidth/2)+"px"},alpha:function(d,c,a){clearInterval(d.ai);if(c){d.style.opacity=0;d.style.filter="alpha(opacity=0)";d.style.display="block";TINY.box.pos()}d.ai=setInterval(function(){TINY.box.ta(d,a,c)},20)},ta:function(f,a,d){var e=Math.round(f.style.opacity*100);if(e==a){clearInterval(f.ai);if(d==-1){f.style.display="none";f==j?TINY.box.alpha(l,-1,0,2):b.innerHTML=g.style.backgroundImage=""}else{if(f==l){this.alpha(j,1,100)}else{j.style.filter="";TINY.box.fill(k.html||k.url,k.url||k.iframe||k.image||k.div,k.post,k.animate,k.width,k.height)}}}else{var c=a-Math.floor(Math.abs(a-e)*0.5)*d;f.style.opacity=c/100;f.style.filter="alpha(opacity="+c+")"}},size:function(h,e,a,c){if(a){clearInterval(g.si);var f=parseInt(g.style.width)>h?-1:1,d=parseInt(g.style.height)>e?-1:1;g.si=setInterval(function(){TINY.box.ts(h,f,e,d,c)},20)}else{g.style.backgroundImage="none";if(k.close){g.appendChild(i);i.v=1}g.style.width=h+"px";g.style.height=e+"px";b.style.display="";this.pos();if(k.openjs!=""){if(k.html2funct==1){window[k.openjs](c,k.farg1,k.farg2)}else{window[k.openjs](k.farg1,k.farg2)}}}},ts:function(n,e,f,d,c){var a=parseInt(g.style.width),h=parseInt(g.style.height);if(a==n&&h==f){clearInterval(g.si);g.style.backgroundImage="none";b.style.display="block";if(k.close){g.appendChild(i);i.v=1}if(k.openjs!=""){if(k.html2funct==1){window[k.openjs](c,k.farg1,k.farg2)}else{window[k.openjs](k.farg1,k.farg2)}}}else{if(a!=n){g.style.width=(n-Math.floor(Math.abs(n-a)*0.6)*e)+"px"}if(h!=f){g.style.height=(f-Math.floor(Math.abs(f-h)*0.6)*d)+"px"}this.pos()}},refil:function(){b.innerHTML="";TINY.box.fill(k.html||k.url,k.url||k.iframe||k.image||k.div,k.post,k.animate,k.width,k.height)},top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(a){var d=document.body,c=document.documentElement;return a?Math.max(Math.max(d.scrollHeight,c.scrollHeight),Math.max(d.clientHeight,c.clientHeight)):Math.max(Math.max(d.scrollWidth,c.scrollWidth),Math.max(d.clientWidth,c.clientWidth))}}}();
